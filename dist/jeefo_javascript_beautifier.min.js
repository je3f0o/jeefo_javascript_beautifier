/**
 * jeefo_javascript_beautifier : v0.0.3
 * Author                      : je3f0o, <je3f0o@gmail.com>
 * Homepage                    : https://github.com/je3f0o/jeefo_javascript_beautifier
 * License                     : The MIT License
 * Copyright                   : 2017
 **/
!function(e,t,i){"use strict";e.use(function(){e.module("jeefo_javascript_beautifier",["jeefo_javascript_parser"]).namespace("javascript.Beautifier",function(){var e=function(e,t){this.indentation=t,this.current_indent=e},t=e.prototype;return t.Constructor=e,t.$new=function(){var e=new this.Constructor(this.indent,this.indentation);return this.middlewares&&ARRAY_COPY(e.middlewares,this.middlewares),e},t.indent=function(){return this.current_indent=this.current_indent+this.indentation,this.current_indent},t.outdent=function(){return this.current_indent=this.current_indent.substring(0,this.current_indent.length-this.indentation.length),this.current_indent},t.middleware=function(e){this.middlewares?this.middlewares.push(e):this.middlewares=[e]},t.compile_binary_expression=function(e,t){switch(e.type){case"BinaryExpression":case"LogicalExpression":switch(t){case"%":case"/":case"*":switch(e.operator){case"%":case"/":case"*":return this.compile(e);default:return"("+this.compile(e)+")"}break;case"-":case"+":switch(e.operator){case"-":case"+":return this.compile(e);default:return"("+this.compile(e)+")"}break;default:return this.compile(e)}}return this.compile(e)},t.SINGLE_QUOTE_REGEX=/'/,t.DOUBLE_QUOTE_REGEX=/"/,t.DOUBLE_QUOTE_REPLACE_REGEX=/"/g,t.get_string=function(e){return""===e?"''":1===e.length?'"'===e?"'\"'":"'"===e?'"\'"':"'"+e+"'":2===e.length&&"\\"===e.charAt(0)?this.SINGLE_QUOTE_REGEX.test(e)?'"'+e+'"':"'"+e+"'":this.DOUBLE_QUOTE_REGEX.test(e)?this.SINGLE_QUOTE_REGEX.test(e)?'"'+e.replace(this.DOUBLE_QUOTE_REPLACE_REGEX,'\\"')+'"':"'"+e+"'":'"'+e+'"'},t.compile=function(e,t){var i,n,r,s,a,c;if(!e)return String(e);if(this||console.log(e),this.middlewares)for(i=0;i<this.middlewares.length;++i)this.middlewares[i](e);if(e.compiled)return e.compiled;switch(e.type){case"Comment":return"/* "+e.comment.trim()+" */";case"EmptyStatement":return"";case"ExpressionStatement":return this.compile(e.expression)+";";case"IfStatement":return s="EmptyStatement"===e.statement.type?";":" "+this.compile(e.statement),"if ("+this.compile(e.test)+")"+s+(e.alternate?" else "+this.compile(e.alternate):"");case"ForStatement":return s="EmptyStatement"===e.statement.type?";":" "+this.compile(e.statement),n=e.init?"VariableDeclaration"===e.init.type?this.compile(e.init):this.compile(e.init)+";":";",e.test?n=n+" "+this.compile(e.test)+";":n+=";",e.update&&(n=n+" "+this.compile(e.update)),"for ("+n+")"+s;case"ForInStatement":return s=this.compile(e.body),";"!==s&&(s=" "+s),n="VariableDeclaration"===e.left.type?this.compile(e.left,!0):this.compile(e.left),"for ("+(n=n+" in "+this.compile(e.right))+")"+s;case"WhileStatement":return s=this.compile(e.body),";"!==s&&(s=" "+s),"while ("+this.compile(e.test)+")"+s;case"SwitchStatement":return this.indent(),s=e.cases.map(this.compile,this).join("\n"+this.current_indent),s&&(s="\n"+this.current_indent+s),this.outdent(),s&&(s=s+"\n"+this.current_indent),"switch ("+this.compile(e.test)+") {"+s+"}";case"BlockStatement":if(a=e.body,a[0]){for(c=this.indent(),s=c+this.compile(a[0]),i=1;i<a.length;++i)s=s+"\n"+c+this.compile(a[i]);s="\n"+s+"\n"+this.outdent()}return"{"+(s||"")+"}";case"TryStatement":return e.handler&&(s=this.compile(e.handler)),e.finalizer&&(s=s+" finally "+this.compile(e.finalizer)),"try "+this.compile(e.block)+s;case"ReturnStatement":return"return"+(e.argument?" "+this.compile(e.argument):"")+";";case"ConditionalExpression":return this.compile(e.test)+" ? "+this.compile(e.consequent)+" : "+this.compile(e.alternate);case"CallExpression":return n=e.arguments.map(this.compile,this).join(", "),this.compile(e.callee)+"("+n+")";case"UnaryExpression":switch(e.operator){case"+":case"-":case"~":return e.operator+this.compile(e.argument);case"!":return s=this.compile(e.argument),"!"===s[0]?"!"+s:"! "+s;case"++":case"--":return e.is_prefix?e.operator+this.compile(e.argument):this.compile(e.argument)+e.operator}return e.operator+" "+this.compile(e.argument);case"SequenceExpression":if(e.expressions[0])for(s=this.compile(e.expressions[0]),i=1;i<e.expressions.length;++i)s=s+", "+this.compile(e.expressions[i]);return s?"("+s+")":"";case"NewExpression":return n=e.arguments.map(this.compile,this).join(", "),"new "+this.compile(e.callee)+"("+n+")";case"BinaryExpression":case"LogicalExpression":return this.compile_binary_expression(e.left,e.operator)+" "+e.operator+" "+this.compile_binary_expression(e.right,e.operator);case"AssignmentExpression":return this.compile(e.left)+" "+e.operator+" "+this.compile(e.right);case"TemplateLiteralExpression":switch(e.expression.type){case"BinaryExpression":case"LogicalExpression":case"ConditionalExpression":return"("+this.compile(e.expression)+")"}return this.compile(e.expression);case"MemberExpression":return e.is_computed?this.compile(e.object)+"["+this.compile(e.property)+"]":this.compile(e.object)+"."+this.compile(e.property);case"FunctionExpression":if(e.parameters[0])for(r=e.parameters[0].name,i=1;i<e.parameters.length;++i)r=r+", "+e.parameters[i].name;return"function "+(e.id?e.id.name+" ":"")+"("+(r||"")+") "+this.compile(e.body);case"StringLiteral":return this.get_string(e.value);case"TemplateLiteralString":return e.value.split("\n").map(this.get_string,this).join(" +\n");case"NumberLiteral":return e.value;case"RegExpLiteral":return"/"+e.regex.pattern+"/"+e.regex.flags;case"ArrayLiteral":if(this.indent(),e.elements.length)for(s=e.elements[0]?this.compile(e.elements[0]):"",i=1;i<e.elements.length;++i)s=e.elements[i]?s+",\n"+this.current_indent+this.compile(e.elements[i]):s+",\n"+this.current_indent+" undefined";return this.outdent(),"["+(s||"")+"]";case"ObjectLiteral":return this.indent(),s=e.properties.map(this.compile,this).join(",\n"),this.outdent(),s&&(s="\n"+s+"\n"+this.current_indent),"{"+s+"}";case"TemplateLiteral":return e.body.map(this.compile,this).join(" + ");case"SwitchCase":return this.indent(),s=e.statements.map(this.compile,this).join("\n"+this.current_indent),s&&(s="\n"+this.current_indent+s),this.outdent(),"case "+this.compile(e.test)+":"+s;case"DefaultCase":return this.indent(),s=e.statements.map(this.compile,this).join("\n"+this.current_indent),s&&(s="\n"+this.current_indent+s),this.outdent(),"default:"+s;case"VariableDeclarator":var o=t-e.id.name.length;if(e.init){for(i=0,c="";i<o;++i)c+=" ";return e.id.name+c+" = "+this.compile(e.init)}return e.id.name;case"VariableDeclaration":this.current_indent+="    ";var l=e.declarations.reduce(function(e,t){return t.id.name.length>e?t.id.name.length:e},0);if(e.declarations[0])for(s=this.compile(e.declarations[0],l),c=this.current_indent+"    ",i=1;i<e.declarations.length;++i)s=s+",\n"+this.current_indent+this.compile(e.declarations[i],l);return this.current_indent=this.current_indent.substring(0,this.current_indent.length-4),t?"var "+s:"var "+s+";\n";case"FunctionDeclaration":if(a=e.body.body,e.parameters[0])for(r=e.parameters[0].name,i=1;i<e.parameters.length;++i)r=r+", "+e.parameters[i].name;return this.current_indent+"function "+e.id.name+" ("+(r||"")+") "+this.compile(e.body)+"\n";case"Property":switch(e.key.type){case"Identifier":return this.current_indent+e.key.name+" : "+this.compile(e.value)}return this.current_indent+e.key.name+" : "+this.compile(e.value);case"Identifier":return e.name;case"CatchClause":return" catch ("+this.compile(e.param)+") "+this.compile(e.body);default:console.log("UNIMPLEMENTED token",e.type)}},e})})}(window.jeefo,window,document);